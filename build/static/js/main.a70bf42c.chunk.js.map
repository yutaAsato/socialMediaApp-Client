{"version":3,"sources":["App.js","contextAPI/app-providers.js","serviceWorker.js","index.js","utils/lib.js","utils/colors.js","contextAPI/userContext.js","utils/api-client.js","contextAPI/authProvider.js","utils/hooks.js"],"names":["AuthenticatedApp","React","lazy","UnauthenticatedApp","App","data","useAuth","Suspense","fallback","FallbackComponent","FullPageErrorFallback","initialIsOpen","theme","createMuiTheme","typography","fontFamily","join","body1","fontSize","fontWeight","body2","body3","queryConfig","queries","useErrorBoundary","refetchOnWindowFocus","retry","failureCount","error","status","AppProviders","children","config","ThemeProvider","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","console","message","spin","keyframes","transform","Spinner","borderRadius","padding","width","height","lineHeight","display","alignItems","justifyContent","background","color","border","cursor","FaSpinner","animation","defaultProps","buttonVariants","primary","secondary","inputStyles","variant","FullPageSpinner","css","flexDirection","role","UserContext","createContext","dataReducer","state","action","type","loggedUser","username","payload","user","email","userId","user_id","joined","created_at","bio","website","notifications","tweets","userTweets","auth","likes","relationships","url","relevantUser","relevantRelationships","relevantComments","relevantUserImage","whoToFollow","initial","Error","UserProvider","props","useReducer","dispatch","value","useMemo","Provider","client","endpoint","a","token","customHeaders","headers","customConfig","method","body","JSON","stringify","undefined","Authorization","fetch","response","queryCache","clear","assign","Promise","reject","json","ok","useClient","localStorage","jwt","useCallback","getToken","getItem","userPromise","getUser","AuthContext","AuthProvider","useAsync","isLoading","isIdle","isError","isSuccess","run","setData","useEffect","login","setItem","register","logout","removeItem","context","useContext","displayName","defaultInitialState","initialState","initialStateRef","s","current","safeSetState","mounted","useSafeDispatch","setError","reset","promise","log"],"mappings":"0NAaMA,EAAmBC,IAAMC,MAAK,kBAClC,qEAEIC,EAAqBF,IAAMC,MAAK,kBAAM,8DAmB7BE,MAff,WAAgB,IACNC,EAASC,cAATD,KAGR,OACE,kBAAC,IAAME,SAAP,CAAgBC,SAAU,kBAAC,IAAD,OACxB,kBAAC,gBAAD,CAAeC,kBAAmBC,KAC/BL,EAAO,kBAACL,EAAD,MAAuB,kBAACG,EAAD,OAGjC,kBAAC,qBAAD,CAAoBQ,eAAe,M,0CCtBnCC,EAAQC,YAAe,CAC3BC,WAAY,CACVC,WAAY,CACV,gBACA,qBACA,aACA,SACA,mBACA,QACA,aACA,sBACA,mBACA,qBACAC,KAAK,KACPC,MAAO,CACLC,SAAU,SACVC,WAAY,OAEdC,MAAO,CACLF,SAAU,QAEZG,MAAO,CACLH,SAAU,aAKVI,EAAc,CAClBC,QAAS,CACPC,kBAAkB,EAClBC,sBAAsB,EACtBC,MAHO,SAGDC,EAAcC,GAClB,OAAqB,MAAjBA,EAAMC,QACDF,EAAe,KAM9B,SAASG,EAAT,GAAqC,IAAbC,EAAY,EAAZA,SACtB,OACE,gBAAC,IAAD,CAA0BC,OAAQV,GAChC,gBAAC,IAAD,KACE,gBAAC,IAAD,KACE,gBAACW,EAAA,EAAD,CAAerB,MAAOA,GACpB,gBAAC,IAAD,KAAemB,OCzCPG,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MACvB,2DCJNC,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAACX,EAAD,KACE,kBAAC,EAAD,QAGJY,SAASC,eAAe,SD+GpB,kBAAmBC,WACrBA,UAAUC,cAAcC,MACrBC,MAAK,SAAAC,GACJA,EAAaC,gBAEdC,OAAM,SAAAtB,GACLuB,QAAQvB,MAAMA,EAAMwB,a,6IE9H5B,IAAMC,EAAOC,YAAU,CACrB,KAAM,CAAEC,UAAW,gBACnB,OAAQ,CAAEA,UAAW,oBA0BjBC,GAvBe,+DAAc,CACjCC,aAAc,OACdC,QAAS,IACTC,MAAO,OACPC,OAAQ,OACRC,WAAY,IACZC,QAAS,OACTC,WAAY,SACZC,eAAgB,SAChBC,WCzBkB,QD0BlBC,MCzBkB,UD0BlBC,OAAO,aAAD,OCxBc,WDyBpBC,OAAQ,WAZW,IAeF,iMAQH,YAAOC,IAAP,qCAAkB,CAChCC,UAAU,GAAD,OAAKjB,EAAL,wBADK,KAGhBG,EAAQe,aAAe,CACrB,aAAc,WAGhB,IAAMC,EAAiB,CACrBC,QAAS,CACPR,WC1CkB,UD2ClBC,MCjDgB,SDmDlBQ,UAAW,CACTT,WClDgB,UDmDhBC,MCpDgB,YDiEdS,GAVS,wHAOb,oBAAGC,QAAH,OAA6BJ,OAA7B,MAAa,UAAb,KAPa,IAUK,CAClBL,OAAQ,oBACRF,WAAY,UACZP,QAAS,aAGG,4EAAsCiB,EAAtC,IACG,6DAAgBA,EAAhB,IAcC,uHAKlB,SAASE,IACP,OACE,mBACEC,IAAK,CACH5D,SAAU,MACV0C,OAAQ,QACRE,QAAS,OACTiB,cAAe,SACff,eAAgB,SAChBD,WAAY,WAGd,YAACP,EAAD,OAsCN,SAAS9C,EAAT,GAA2C,IAAVkB,EAAS,EAATA,MAC/B,OACE,mBACEoD,KAAK,QACLF,IAAK,CACHZ,MCxIc,UDyIdN,OAAQ,QACRE,QAAS,OACTiB,cAAe,SACff,eAAgB,SAChBD,WAAY,WAGd,4EACA,uBAAMnC,EAAMwB,Y,+IEvJL6B,EAAchF,IAAMiF,cADZ,IAIrB,SAASC,EAAYC,EAAOC,GAC1B,OAAQA,EAAOC,MACb,IAAK,WACH,OAAO,2BACFF,GADL,IAEEG,WAAY,CACVC,SAAUH,EAAOI,QAAQC,KAAKF,SAC9BG,MAAON,EAAOI,QAAQC,KAAKC,MAC3BC,OAAQP,EAAOI,QAAQC,KAAKG,QAC5BC,OAAQT,EAAOI,QAAQC,KAAKK,WAC5BC,IAAKX,EAAOI,QAAQC,KAAKM,IACzBC,QAASZ,EAAOI,QAAQC,KAAKO,QAC7B7D,SAAUiD,EAAOI,QAAQC,KAAKtD,SAC9B8D,cAAc,YAAKb,EAAOI,QAAQS,kBAGxC,IAAK,aACH,OAAO,2BACFd,GADL,IAEEe,OAAO,YAAKd,EAAOI,WAEvB,IAAK,kBACH,OAAO,2BACFL,GADL,IAEEgB,WAAW,YAAKf,EAAOI,WAE3B,IAAK,WACH,OAAO,2BACFL,GADL,IAEEiB,KAAMhB,EAAOI,UAEjB,IAAK,YACH,OAAO,2BACFL,GADL,IAEEkB,MAAM,YAAKjB,EAAOI,WAEtB,IAAK,oBACH,OAAO,2BACFL,GADL,IAEEmB,cAAc,YAAKlB,EAAOI,WAE9B,IAAK,WACH,OAAO,2BACFL,GADL,IAEEoB,IAAK,CAACnB,EAAOI,WAEjB,IAAK,oBACH,OAAO,2BACFL,GADL,IAEEqB,aAAc,CAACpB,EAAOI,WAE1B,IAAK,6BACH,OAAO,2BACFL,GADL,IAEEsB,sBAAsB,YAAKrB,EAAOI,WAEtC,IAAK,wBACH,OAAO,2BACFL,GADL,IAEEuB,iBAAiB,YAAKtB,EAAOI,WAOjC,IAAK,0BACH,OAAO,2BACFL,GADL,IAEEwB,kBAAmBvB,EAAOI,UAE9B,IAAK,oBACH,OAAO,2BACFL,GADL,IAEEyB,YAAY,YAAKxB,EAAOI,WAE5B,IAAK,UACH,OAAO,2BAIFL,GAJL,IAKE0B,YAEJ,QACE,MAAM,IAAIC,MAAJ,mCAAsC1B,EAAOC,QAKzD,IAAMwB,EAAU,CACdvB,WAAY,KACZgB,cAAe,GACfH,WAAY,GACZD,OAAQ,GACRG,MAAO,GACPD,MAAM,EACNG,IAAK,GACLC,aAAc,GACdC,sBAAuB,GACvBC,iBAAkB,GAElBC,kBAAmB,GACnBC,YAAa,IAIR,SAASG,EAAaC,GAAQ,IAAD,EACRhH,IAAMiH,WAAW/B,EAAa2B,GADtB,mBAC3B1B,EAD2B,KACpB+B,EADoB,KAG5BC,EAAQnH,IAAMoH,SAAQ,iBAAM,CAACjC,EAAO+B,KAAW,CAAC/B,IACtD,OAAO,kBAACH,EAAYqC,SAAb,eAAsBF,MAAOA,GAAWH,M,uMCpGlCM,E,8EAAf,WACEC,GADF,qCAAAC,EAAA,8FAE6D,GAAzDpH,EAFJ,EAEIA,KAAMqH,EAFV,EAEUA,MAAgBC,EAF1B,EAEiBC,QAA2BC,EAF5C,0CAIQ7F,EAJR,aAKI8F,OAAQzH,EAAO,OAAS,MACxB0H,KAAM1H,EAAO2H,KAAKC,UAAU5H,QAAQ6H,EACpCN,QAAQ,aACNO,cAAeT,QAAgBQ,EAC/B,eAAgB7H,EAAO,wBAAqB6H,GACzCP,IAEFE,GAZP,kBAeS1F,OACJiG,MADI,mDAC8CZ,GAAYxF,GAC9De,KAFI,uCAEC,WAAOsF,GAAP,eAAAZ,EAAA,yDACoB,MAApBY,EAASxG,OADT,uBAEFyG,IAAWC,QAGXpG,OAAOC,SAASoG,OAAOrG,OAAOC,UAL5B,kBAMKqG,QAAQC,OAAO,CAAEtF,QAAS,6BAN/B,uBAQeiF,EAASM,OARxB,UAQEtI,EARF,QASAgI,EAASO,GATT,0CAUKvI,GAVL,iCAYKoI,QAAQC,OAAOrI,IAZpB,4CAFD,wDAfT,4C,sBAmCA,SAASwI,IACP,IAAInB,EAAQoB,aAAaC,IAEzB,OADArB,EAAK,iBAAaA,GACXzH,IAAM+I,aACX,SAACxB,EAAUxF,GAAX,OAAsBuF,EAAOC,EAAD,YAAC,eAAexF,GAAhB,IAAwB0F,aACpD,CAACA,M,uLCjDL,SAASuB,IAQP,OANI9G,OAAO2G,aAAaI,QAAQ,OACzB,iBAAa/G,OAAO2G,aAAaI,QAAQ,QAEtC,K,4CAMZ,gCAAAzB,EAAA,yDACM/B,EAAO,OACPgC,EAAQuB,KAFd,gCAIuB1B,YAAO,OAAQ,CAAEG,UAJxC,OAIUrH,EAJV,OAKIqF,EAAOrF,EALX,gCAQSqF,GART,4C,sBAWA,IAAMyD,E,0CAAcC,GAEdC,EAAcpJ,IAAMiF,gBAG1B,SAASoE,EAAarC,GAAQ,IAAD,EAWvBsC,cATFlJ,EAFyB,EAEzBA,KACAuB,EAHyB,EAGzBA,MACA4H,EAJyB,EAIzBA,UACAC,EALyB,EAKzBA,OACAC,EANyB,EAMzBA,QACAC,EAPyB,EAOzBA,UACAC,EARyB,EAQzBA,IACAC,EATyB,EASzBA,QACAhI,EAVyB,EAUzBA,OAIF5B,IAAM6J,WAAU,WACdF,EAAIT,KACH,CAACS,IAGJ,IAAMG,EAAQ9J,IAAM+I,aAClB,SAAC3I,GAAD,OACEkH,YAAO,QAAS,CAAElH,SAAQ0C,MAAK,SAAC2C,GAC9BvD,OAAO2G,aAAakB,QAAQ,MAAOtE,GACnCmE,EAAQnE,QAEZ,CAACmE,IAIGI,EAAWhK,IAAM+I,aACrB,SAAC3I,GAAD,OACEkH,YAAO,WAAY,CAAElH,SAAQ0C,MAAK,SAAC2C,GACjCvD,OAAO2G,aAAakB,QAAQ,MAAOtE,GACnCmE,EAAQnE,QAEZ,CAACmE,IAIGK,EAASjK,IAAM+I,aAAY,WAC/BF,aAAaqB,WAAW,OACxBN,EAAQ,QACP,CAACA,IAGEzC,EAAQnH,IAAMoH,SAAQ,iBAAO,CAAEhH,OAAM0J,QAAOG,SAAQD,cAAa,CACrEF,EACA1J,EACA6J,EACAD,IAIF,GAAIT,GAAaC,EACf,OAAO,YAAC,IAAD,MAGT,GAAIC,EACF,OAAO,YAAC,IAAD,CAAuB9H,MAAOA,IAGvC,GAAI+H,EACF,OAAO,YAACN,EAAY/B,SAAb,eAAsBF,MAAOA,GAAWH,IAGjD,MAAM,IAAIF,MAAJ,4BAA+BlF,IAIvC,SAASvB,IACP,IAAM8J,EAAUnK,IAAMoK,WAAWhB,GACjC,QAAgBnB,IAAZkC,EACF,MAAM,IAAIrD,MAAJ,8CAGR,OAAOqD,EA7ETf,EAAYiB,YAAc,e,4FCd1B,IAAMC,EAAsB,CAAE1I,OAAQ,OAAQxB,KAAM,KAAMuB,MAAO,MAEjE,SAAS2H,EAASiB,GAChB,IAAMC,EAAkBxK,SAAA,2BACnBsK,GACAC,IAHyB,EAKcvK,cAC1C,SAACyK,EAAGjD,GAAJ,mBAAC,eAAeiD,GAAMjD,KACtBgD,EAAgBE,SAPY,0BAKrB9I,EALqB,EAKrBA,OAAQxB,EALa,EAKbA,KAAMuB,EALO,EAKPA,MAKjBgJ,EA/BR,SAAyBzD,GACvB,IAAM0D,EAAU5K,UAAa,GAO7B,OALAA,mBAAsB,WAEpB,OADA4K,EAAQF,SAAU,EACX,kBAAOE,EAAQF,SAAU,KAC/B,IAEI1K,eACL,kBAAc4K,EAAQF,QAAUxD,EAAQ,WAAR,kBAAoB,IACpD,CAACA,IAqBkB2D,CAVS,MAYxBjB,EAAU5J,eACd,SAACI,GAAD,OAAUuK,EAAa,CAAEvK,OAAMwB,OAAQ,eACvC,CAAC+I,IAEGG,EAAW9K,eACf,SAAC2B,GAAD,OAAWgJ,EAAa,CAAEhJ,QAAOC,OAAQ,eACzC,CAAC+I,IAEGI,EAAQ/K,eAAkB,kBAAM2K,EAAaH,EAAgBE,WAAU,CAC3EC,IAGIhB,EAAM3J,eACV,SAACgL,GACC,IAAKA,IAAYA,EAAQlI,KACvB,MAAM,IAAIgE,MAAJ,qHAKR,OADA6D,EAAa,CAAE/I,OAAQ,YAChBoJ,EAAQlI,MACb,SAAC1C,GAEC,OADAwJ,EAAQxJ,GACDA,KAET,SAACuB,GAGC,OAFAuB,QAAQ+H,IAAI,SAAUtJ,GACtBmJ,EAASnJ,GACF6G,QAAQC,OAAO9G,QAI5B,CAACgJ,EAAcf,EAASkB,IAG1B,MAAO,CAELtB,OAAmB,SAAX5H,EACR2H,UAAsB,YAAX3H,EACX6H,QAAoB,aAAX7H,EACT8H,UAAsB,aAAX9H,EAEXgI,UACAkB,WACAnJ,QACAC,SACAxB,OACAuJ,MACAoB,W","file":"static/js/main.a70bf42c.chunk.js","sourcesContent":["import React from \"react\";\nimport { useAuth } from \"../src/contextAPI/authProvider\";\nimport { ErrorBoundary } from \"react-error-boundary\";\nimport { FullPageErrorFallback } from \"../src/utils/lib\";\n\n//components\n// import { AuthenticatedApp } from \"./AuthenticatedApp\";\n// import { UnauthenticatedApp } from \"./UnauthenticatedApp\";\n\nimport { ReactQueryDevtools } from \"react-query-devtools\";\nimport { FullPageSpinner } from \"./utils/lib\";\n\n//Lazy load\nconst AuthenticatedApp = React.lazy(() =>\n  import(/* webpackPrefetch: true */ \"./AuthenticatedApp\")\n);\nconst UnauthenticatedApp = React.lazy(() => import(\"./UnauthenticatedApp\"));\n\n//==========================================================\n\nfunction App() {\n  const { data } = useAuth();\n  // console.log(data.user);\n\n  return (\n    <React.Suspense fallback={<FullPageSpinner />}>\n      <ErrorBoundary FallbackComponent={FullPageErrorFallback}>\n        {data ? <AuthenticatedApp /> : <UnauthenticatedApp />}\n      </ErrorBoundary>\n\n      <ReactQueryDevtools initialIsOpen={false} />\n    </React.Suspense>\n  );\n}\n\nexport default App;\n","import * as React from \"react\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport { ReactQueryConfigProvider } from \"react-query\";\nimport { AuthProvider } from \"./authProvider\";\nimport { UserProvider } from \"./userContext\";\nimport { ThemeProvider } from \"@material-ui/core\";\nimport { createMuiTheme } from \"@material-ui/core/styles\";\n\nconst theme = createMuiTheme({\n  typography: {\n    fontFamily: [\n      \"-apple-system\",\n      \"BlinkMacSystemFont\",\n      '\"Segoe UI\"',\n      \"Roboto\",\n      '\"Helvetica Neue\"',\n      \"Arial\",\n      \"sans-serif\",\n      '\"Apple Color Emoji\"',\n      '\"Segoe UI Emoji\"',\n      '\"Segoe UI Symbol\"',\n    ].join(\",\"),\n    body1: {\n      fontSize: \"1.2rem\",\n      fontWeight: \"800\",\n    },\n    body2: {\n      fontSize: \"1rem\",\n    },\n    body3: {\n      fontSize: \"0.7rem\",\n    },\n  },\n});\n\nconst queryConfig = {\n  queries: {\n    useErrorBoundary: true,\n    refetchOnWindowFocus: false,\n    retry(failureCount, error) {\n      if (error.status === 404) return false;\n      else if (failureCount < 2) return true;\n      else return false;\n    },\n  },\n};\n\nfunction AppProviders({ children }) {\n  return (\n    <ReactQueryConfigProvider config={queryConfig}>\n      <Router>\n        <UserProvider>\n          <ThemeProvider theme={theme}>\n            <AuthProvider>{children}</AuthProvider>\n          </ThemeProvider>\n        </UserProvider>\n      </Router>\n    </ReactQueryConfigProvider>\n  );\n}\n\nexport { AppProviders };\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\n//contextAPI\nimport { UserProvider } from \"./contextAPI/userContext\";\n\nimport { AuthProvider } from \"./contextAPI/authProvider\";\n\nimport { AppProviders } from \"./contextAPI/app-providers\";\n\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <AppProviders>\n      <App />\n    </AppProviders>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","/** @jsx jsx */\nimport { jsx } from \"@emotion/react\";\n\nimport { Link as RouterLink } from \"react-router-dom\";\nimport styled from \"@emotion/styled/macro\";\nimport { keyframes } from \"@emotion/react\";\nimport * as colors from \"./colors\";\n// import * as mq from \"styles/media-queries\";\n// import { Dialog as ReachDialog } from \"@reach/dialog\";\nimport { FaSpinner } from \"react-icons/fa\";\n\nconst spin = keyframes({\n  \"0%\": { transform: \"rotate(0deg)\" },\n  \"100%\": { transform: \"rotate(360deg)\" },\n});\n\nconst CircleButton = styled.button({\n  borderRadius: \"30px\",\n  padding: \"0\",\n  width: \"40px\",\n  height: \"40px\",\n  lineHeight: \"1\",\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"center\",\n  background: colors.base,\n  color: colors.text,\n  border: `1px solid ${colors.gray10}`,\n  cursor: \"pointer\",\n});\n\nconst BookListUL = styled.ul({\n  listStyle: \"none\",\n  padding: \"0\",\n  display: \"grid\",\n  gridTemplateRows: \"repeat(auto-fill, minmax(100px, 1fr))\",\n  gridGap: \"1em\",\n});\n\nconst Spinner = styled(FaSpinner)({\n  animation: `${spin} 1s linear infinite`,\n});\nSpinner.defaultProps = {\n  \"aria-label\": \"loading\",\n};\n\nconst buttonVariants = {\n  primary: {\n    background: colors.indigo,\n    color: colors.base,\n  },\n  secondary: {\n    background: colors.gray,\n    color: colors.text,\n  },\n};\nconst Button = styled.button(\n  {\n    padding: \"10px 15px\",\n    border: \"0\",\n    lineHeight: \"1\",\n    borderRadius: \"3px\",\n  },\n  ({ variant = \"primary\" }) => buttonVariants[variant]\n);\n\nconst inputStyles = {\n  border: \"1px solid #f1f1f4\",\n  background: \"#f1f2f7\",\n  padding: \"8px 12px\",\n};\n\nconst Input = styled.input({ borderRadius: \"3px\" }, inputStyles);\nconst Textarea = styled.textarea(inputStyles);\n\n// const Dialog = styled(ReachDialog)({\n//   maxWidth: '450px',\n//   borderRadius: '3px',\n//   paddingBottom: '3.5em',\n//   boxShadow: '0 10px 30px -5px rgba(0, 0, 0, 0.2)',\n//   margin: '20vh auto',\n//   [mq.small]: {\n//     width: '100%',\n//     margin: '10vh auto',\n//   },\n// })\n\nconst FormGroup = styled.div({\n  display: \"flex\",\n  flexDirection: \"column\",\n});\n\nfunction FullPageSpinner() {\n  return (\n    <div\n      css={{\n        fontSize: \"4em\",\n        height: \"100vh\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n      }}\n    >\n      <Spinner />\n    </div>\n  );\n}\n\nconst Link = styled(RouterLink)({\n  color: colors.indigo,\n  \":hover\": {\n    color: colors.indigoDarken10,\n    textDecoration: \"underline\",\n  },\n});\n\nconst errorMessageVariants = {\n  stacked: { display: \"block\" },\n  inline: { display: \"inline-block\" },\n};\n\nfunction ErrorMessage({ error, variant = \"stacked\", ...props }) {\n  return (\n    <div\n      role=\"alert\"\n      css={[{ color: colors.danger }, errorMessageVariants[variant]]}\n      {...props}\n    >\n      <span>There was an error: </span>\n      <pre\n        css={[\n          { whiteSpace: \"break-spaces\", margin: \"0\", marginBottom: -5 },\n          errorMessageVariants[variant],\n        ]}\n      >\n        {error.message}\n      </pre>\n    </div>\n  );\n}\n\nfunction FullPageErrorFallback({ error }) {\n  return (\n    <div\n      role=\"alert\"\n      css={{\n        color: colors.danger,\n        height: \"100vh\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n      }}\n    >\n      <p>Uh oh... There's a problem. Try refreshing the app.</p>\n      <pre>{error.message}</pre>\n    </div>\n  );\n}\n\nexport {\n  FullPageErrorFallback,\n  ErrorMessage,\n  CircleButton,\n  BookListUL,\n  Spinner,\n  Button,\n  Input,\n  Textarea,\n  //   Dialog,\n  FormGroup,\n  FullPageSpinner,\n  Link,\n};\n","export const base = \"white\";\nexport const text = \"#434449\";\nexport const gray = \"#f1f2f7\";\nexport const gray10 = \"#f1f1f4\";\nexport const gray20 = \"#e4e5e9\";\nexport const gray80 = \"#6f7077\";\nexport const indigo = \"#3f51b5\";\nexport const indigoDarken10 = \"#364495\";\nexport const indigoLighten80 = \"#b7c1f8\";\nexport const yellow = \"#ffc107\";\nexport const green = \"#4caf50\";\nexport const danger = \"#ef5350\";\nexport const orange = \"orange\";\n","import React from \"react\";\n// import { render } from \"@testing-library/react\";\n\n//create context\nconst initialState = {};\nexport const UserContext = React.createContext(initialState);\n\n//reducer\nfunction dataReducer(state, action) {\n  switch (action.type) {\n    case \"SET_USER\":\n      return {\n        ...state,\n        loggedUser: {\n          username: action.payload.user.username,\n          email: action.payload.user.email,\n          userId: action.payload.user.user_id,\n          joined: action.payload.user.created_at,\n          bio: action.payload.user.bio,\n          website: action.payload.user.website,\n          location: action.payload.user.location,\n          notifications: [...action.payload.notifications],\n        },\n      };\n    case \"SET_TWEETS\":\n      return {\n        ...state,\n        tweets: [...action.payload],\n      };\n    case \"SET_USER_TWEETS\":\n      return {\n        ...state,\n        userTweets: [...action.payload],\n      };\n    case \"SET_AUTH\":\n      return {\n        ...state,\n        auth: action.payload,\n      };\n    case \"SET_LIKES\":\n      return {\n        ...state,\n        likes: [...action.payload],\n      };\n    case \"SET_RELATIONSHIPS\":\n      return {\n        ...state,\n        relationships: [...action.payload],\n      };\n    case \"URL_DATA\":\n      return {\n        ...state,\n        url: [action.payload],\n      };\n    case \"SET_RELEVANT_USER\":\n      return {\n        ...state,\n        relevantUser: [action.payload],\n      };\n    case \"SET_RELEVANT_RELATIONSHIPS\":\n      return {\n        ...state,\n        relevantRelationships: [...action.payload],\n      };\n    case \"SET_RELEVANT_COMMENTS\":\n      return {\n        ...state,\n        relevantComments: [...action.payload],\n      };\n    // case \"RELEVANT_LIKES\":\n    //   return {\n    //     ...state,\n    //     relevantLikes: [...action.payload],\n    //   };\n    case \"SET_RELEVANT_USER_IMAGE\":\n      return {\n        ...state,\n        relevantUserImage: action.payload,\n      };\n    case \"SET_WHO_TO_FOLLOW\":\n      return {\n        ...state,\n        whoToFollow: [...action.payload],\n      };\n    case \"LOG_OUT\":\n      return {\n        // ...state,\n        // relationships: [],\n        // loggedUser: null,\n        ...state,\n        initial,\n      };\n    default: {\n      throw new Error(`Unsupported action type: ${action.type}`);\n    }\n  }\n}\n\nconst initial = {\n  loggedUser: null,\n  relationships: [],\n  userTweets: [],\n  tweets: [],\n  likes: [],\n  auth: false,\n  url: [],\n  relevantUser: [],\n  relevantRelationships: [],\n  relevantComments: [],\n  // relevantLikes: [],\n  relevantUserImage: \"\",\n  whoToFollow: [],\n};\n\n//provider\nexport function UserProvider(props) {\n  const [state, dispatch] = React.useReducer(dataReducer, initial);\n\n  const value = React.useMemo(() => [state, dispatch], [state]);\n  return <UserContext.Provider value={value} {...props} />;\n}\n","import React, { useContext } from \"react\";\nimport axios from \"axios\";\n\nimport { queryCache } from \"react-query\";\nimport { UserContext } from \"../contextAPI/userContext\";\n\n//---------------------------------------------------------\n\n// const apiURL = process.env.REACT_APP_API_URL\n\n//logout\nfunction useHandlelogOut() {\n  const [, dispatch] = useContext(UserContext);\n  localStorage.removeItem(\"jwt\");\n  delete axios.defaults.headers.common[\"Authorization\"];\n  dispatch({ type: \"SET_AUTH\", payload: false });\n  dispatch({ type: \"LOG_OUT\" });\n}\n\nasync function client(\n  endpoint,\n  { data, token, headers: customHeaders, ...customConfig } = {}\n) {\n  const config = {\n    method: data ? \"POST\" : \"GET\",\n    body: data ? JSON.stringify(data) : undefined,\n    headers: {\n      Authorization: token ? token : undefined,\n      \"Content-Type\": data ? \"application/json\" : undefined,\n      ...customHeaders,\n    },\n    ...customConfig,\n  };\n\n  return window\n    .fetch(`https://socialmedia-server.herokuapp.com/${endpoint}`, config)\n    .then(async (response) => {\n      if (response.status === 401) {\n        queryCache.clear();\n        // await useHandlelogOut();\n        // refresh the page for them\n        window.location.assign(window.location);\n        return Promise.reject({ message: \"Please re-authenticate.\" });\n      }\n      const data = await response.json();\n      if (response.ok) {\n        return data;\n      } else {\n        return Promise.reject(data);\n      }\n    });\n}\n\n//useClient\nfunction useClient() {\n  let token = localStorage.jwt;\n  token = `Bearer ${token}`;\n  return React.useCallback(\n    (endpoint, config) => client(endpoint, { ...config, token }),\n    [token]\n  );\n}\n\nexport { useClient, client };\n","/** @jsx jsx */\nimport { jsx } from \"@emotion/react\";\n\nimport React from \"react\";\n// import * as auth from 'auth-provider'\nimport { client } from \"../utils/api-client\";\nimport { useAsync } from \"../utils/hooks\";\nimport { FullPageSpinner, FullPageErrorFallback } from \"../utils/lib\";\n\n//getting the token so useEffect can check everytime provider renders\nfunction getToken() {\n  let token;\n  if (window.localStorage.getItem(\"jwt\")) {\n    token = `Bearer ${window.localStorage.getItem(\"jwt\")}`;\n  } else {\n    token = null;\n  }\n\n  return token;\n}\n\nasync function getUser() {\n  let user = null;\n  let token = getToken();\n  if (token) {\n    const data = await client(\"user\", { token });\n    user = data;\n  }\n\n  return user;\n}\n\nconst userPromise = getUser();\n\nconst AuthContext = React.createContext();\nAuthContext.displayName = \"AuthContext\";\n\nfunction AuthProvider(props) {\n  const {\n    data,\n    error,\n    isLoading,\n    isIdle,\n    isError,\n    isSuccess,\n    run,\n    setData,\n    status,\n  } = useAsync();\n\n  //effect\n  React.useEffect(() => {\n    run(userPromise);\n  }, [run]);\n\n  //login\n  const login = React.useCallback(\n    (data) =>\n      client(\"login\", { data }).then((user) => {\n        window.localStorage.setItem(\"jwt\", user);\n        setData(user);\n      }),\n    [setData]\n  );\n\n  //register\n  const register = React.useCallback(\n    (data) =>\n      client(\"register\", { data }).then((user) => {\n        window.localStorage.setItem(\"jwt\", user);\n        setData(user);\n      }),\n    [setData]\n  );\n\n  //logout\n  const logout = React.useCallback(() => {\n    localStorage.removeItem(\"jwt\");\n    setData(null);\n  }, [setData]);\n\n  //value\n  const value = React.useMemo(() => ({ data, login, logout, register }), [\n    login,\n    data,\n    logout,\n    register,\n  ]);\n\n  //returns\n  if (isLoading || isIdle) {\n    return <FullPageSpinner />;\n  }\n\n  if (isError) {\n    return <FullPageErrorFallback error={error} />;\n  }\n\n  if (isSuccess) {\n    return <AuthContext.Provider value={value} {...props} />;\n  }\n\n  throw new Error(`Unhandled status: ${status}`);\n}\n\n//useAuth\nfunction useAuth() {\n  const context = React.useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error(`useAuth must be used within a AuthProvider`);\n  }\n\n  return context;\n}\n\n//useClient\nfunction useClient() {\n  const {\n    user: { token },\n  } = useAuth();\n  return React.useCallback(\n    (endpoint, config) => client(endpoint, { ...config, token }),\n    [token]\n  );\n}\n\nexport { AuthProvider, useAuth, useClient };\n","import * as React from \"react\";\n\nfunction useSafeDispatch(dispatch) {\n  const mounted = React.useRef(false);\n\n  React.useLayoutEffect(() => {\n    mounted.current = true;\n    return () => (mounted.current = false);\n  }, []);\n\n  return React.useCallback(\n    (...args) => (mounted.current ? dispatch(...args) : void 0),\n    [dispatch]\n  );\n}\n\n// Example usage:\n// const {data, error, status, run} = useAsync()\n// React.useEffect(() => {\n//   run(fetchPokemon(pokemonName))\n// }, [pokemonName, run])\nconst defaultInitialState = { status: \"idle\", data: null, error: null };\n\nfunction useAsync(initialState) {\n  const initialStateRef = React.useRef({\n    ...defaultInitialState,\n    ...initialState,\n  });\n  const [{ status, data, error }, setState] = React.useReducer(\n    (s, a) => ({ ...s, ...a }),\n    initialStateRef.current\n  );\n\n  const safeSetState = useSafeDispatch(setState);\n\n  const setData = React.useCallback(\n    (data) => safeSetState({ data, status: \"resolved\" }),\n    [safeSetState]\n  );\n  const setError = React.useCallback(\n    (error) => safeSetState({ error, status: \"rejected\" }),\n    [safeSetState]\n  );\n  const reset = React.useCallback(() => safeSetState(initialStateRef.current), [\n    safeSetState,\n  ]);\n\n  const run = React.useCallback(\n    (promise) => {\n      if (!promise || !promise.then) {\n        throw new Error(\n          `The argument passed to useAsync().run must be a promise. Maybe a function that's passed isn't returning anything?`\n        );\n      }\n      safeSetState({ status: \"pending\" });\n      return promise.then(\n        (data) => {\n          setData(data);\n          return data;\n        },\n        (error) => {\n          console.log(\"error:\", error);\n          setError(error);\n          return Promise.reject(error);\n        }\n      );\n    },\n    [safeSetState, setData, setError]\n  );\n\n  return {\n    // using the same names that react-query uses for convenience\n    isIdle: status === \"idle\",\n    isLoading: status === \"pending\",\n    isError: status === \"rejected\",\n    isSuccess: status === \"resolved\",\n\n    setData,\n    setError,\n    error,\n    status,\n    data,\n    run,\n    reset,\n  };\n}\n\nexport { useAsync };\n"],"sourceRoot":""}